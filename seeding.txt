MySQL
=====

Creation
--------

alter table Successors  drop foreign key FKC8FD6E3D23245EF1



alter table Successors  drop foreign key FKC8FD6E3D4BD25B3



alter table Parents  drop foreign key FKF45BDCA34BD25B3



alter table Parents  drop foreign key FKF45BDCA323245EF1


    drop table if exists `Board`

    drop table if exists Successors

    drop table if exists Parents

    create table `Board` (
        Id VARCHAR(40) not null,
       Empty BIGINT,
       Mover BIGINT,
       Ply INTEGER not null,
       primary key (Id)
    )

    create table Successors (
        ParentId VARCHAR(40) not null,
       ChildId VARCHAR(40) not null,
       primary key (ParentId, ChildId)
    )

    create table Parents (
        ChildId VARCHAR(40) not null,
       ParentId VARCHAR(40) not null,
       primary key (ChildId, ParentId)
    )

    alter table Successors
        add index (ChildId),
        add constraint FKC8FD6E3D23245EF1
        foreign key (ChildId)
        references `Board` (Id)

    alter table Successors
        add index (ParentId),
        add constraint FKC8FD6E3D4BD25B3
        foreign key (ParentId)
        references `Board` (Id)

    alter table Parents
        add index (ParentId),
        add constraint FKF45BDCA34BD25B3
        foreign key (ParentId)
        references `Board` (Id)

    alter table Parents
        add index (ChildId),
        add constraint FKF45BDCA323245EF1
        foreign key (ChildId)
        references `Board` (Id)
		
Before Batch Import
===================

alter table board drop index EmptyMover;
load data infile 'c:/users/daniel/programming/gridbook/board.csv' into table board fields terminated by ',';
#alter table board add constraint unique EmptyMover (Empty, Mover);
alter table board add index Empty (Empty ASC);

ALTER TABLE `gridbook`.`parents` DROP FOREIGN KEY `FKF45BDCA34BD25B3` , DROP FOREIGN KEY `FKF45BDCA323245EF1` ;
load data infile 'c:/users/daniel/programming/gridbook/parents.csv' into table parents fields terminated by ',';

alter table Parents
    add index (ParentId),
    add constraint FKF45BDCA34BD25B3
    foreign key (ParentId)
    references `Board` (Id);

alter table Parents
    add index (ChildId),
    add constraint FKF45BDCA323245EF1
    foreign key (ChildId)
    references `Board` (Id);

ALTER TABLE Board PARTITION BY RANGE(Ply) (
    PARTITION p00 VALUES LESS THAN (1),
    PARTITION p01 VALUES LESS THAN (2),  PARTITION p02 VALUES LESS THAN (3), 
    PARTITION p03 VALUES LESS THAN (4),  PARTITION p04 VALUES LESS THAN (5),
    PARTITION p05 VALUES LESS THAN (6),  PARTITION p06 VALUES LESS THAN (7),
    PARTITION p07 VALUES LESS THAN (8),  PARTITION p08 VALUES LESS THAN (9),
    PARTITION p09 VALUES LESS THAN (10), PARTITION p10 VALUES LESS THAN (11),
    PARTITION p11 VALUES LESS THAN (12), PARTITION p12 VALUES LESS THAN (13),
    PARTITION p13 VALUES LESS THAN (14), PARTITION p14 VALUES LESS THAN (15),
    PARTITION p15 VALUES LESS THAN (16), PARTITION p16 VALUES LESS THAN (17),
    PARTITION p17 VALUES LESS THAN (18), PARTITION p18 VALUES LESS THAN (19),
    PARTITION p19 VALUES LESS THAN (20), PARTITION p20 VALUES LESS THAN (21),
    PARTITION p21 VALUES LESS THAN (22), PARTITION p22 VALUES LESS THAN (23),
    PARTITION p23 VALUES LESS THAN (24), PARTITION p24 VALUES LESS THAN (25),
    PARTITION p25 VALUES LESS THAN (26), PARTITION p26 VALUES LESS THAN (27),
    PARTITION p27 VALUES LESS THAN (28), PARTITION p28 VALUES LESS THAN (29),
    PARTITION p29 VALUES LESS THAN (30), PARTITION p30 VALUES LESS THAN (31),
    PARTITION p31 VALUES LESS THAN (32), PARTITION p32 VALUES LESS THAN (33),
    PARTITION p33 VALUES LESS THAN (34), PARTITION p34 VALUES LESS THAN (35),
    PARTITION p35 VALUES LESS THAN (36), PARTITION p36 VALUES LESS THAN (37),
    PARTITION p37 VALUES LESS THAN (38), PARTITION p38 VALUES LESS THAN (39),
    PARTITION p39 VALUES LESS THAN (40), PARTITION p40 VALUES LESS THAN (41),
    PARTITION p41 VALUES LESS THAN (42), PARTITION p42 VALUES LESS THAN (43),
    PARTITION p43 VALUES LESS THAN (44), PARTITION p44 VALUES LESS THAN (45),
    PARTITION p45 VALUES LESS THAN (46), PARTITION p46 VALUES LESS THAN (47),
    PARTITION p47 VALUES LESS THAN (48), PARTITION p48 VALUES LESS THAN (49),
    PARTITION p49 VALUES LESS THAN (50), PARTITION p50 VALUES LESS THAN (51),
    PARTITION p51 VALUES LESS THAN (52), PARTITION p52 VALUES LESS THAN (53),
    PARTITION p53 VALUES LESS THAN (54), PARTITION p54 VALUES LESS THAN (55),
    PARTITION p55 VALUES LESS THAN (56), PARTITION p56 VALUES LESS THAN (57),
    PARTITION p57 VALUES LESS THAN (58), PARTITION p58 VALUES LESS THAN (59),
    PARTITION p59 VALUES LESS THAN (60), PARTITION p60 VALUES LESS THAN (MAXVALUE)
);

PostgreSQL
==========

\copy "Board" from 'C:\Users\Daniel\Programming\GridBook\merged.csv' DELIMITERS ',' CSV;

SQLite:

.import merged.csv Board
